FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

RUN yum -y install python-boto3 python-boto && yum clean all

COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHNxcy1hcGIKZGVzY3JpcHRpb246IEFtYXpvbiBNYW5hZ2VkIFNR\
UyBRdWV1ZSBBUEIgSW1wbGVtZW50YXRpb24KdGFnczoKICAtIGFtYXpvbgogIC0gc3FzCiAgLSBz\
dGFuZGFyZAogIC0gZmlmbwpiaW5kYWJsZTogdHJ1ZQphc3luYzogb3B0aW9uYWwKbWV0YWRhdGE6\
CiAgZGlzcGxheU5hbWU6ICJBbWF6b24gU1FTIFF1ZXVlIChBUEIpIgogIGltYWdlVXJsOiAiaHR0\
cHM6Ly9zMy5hbWF6b25hd3MuY29tL3RocC1hd3MtaWNvbnMtZGV2L01lc3NhZ2luZ19BbWF6b25T\
UVNfTEFSR0UucG5nIgogIGRvY3VtZW50YXRpb25Vcmw6ICJodHRwczovL2F3cy5hbWF6b24uY29t\
L2RvY3VtZW50YXRpb24vc3FzLyIKICBsb25nRGVzY3JpcHRpb246ICJBbWF6b24gU2ltcGxlIFF1\
ZXVlIFNlcnZpY2UgKEFtYXpvbiBTUVMpIGlzIGEgZnVsbHkgbWFuYWdlZCBtZXNzYWdlIHF1ZXVp\
bmcgc2VydmljZSB0aGF0IG1ha2VzIGl0IGVhc3kgdG8gZGVjb3VwbGUgYW5kIHNjYWxlIG1pY3Jv\
c2VydmljZXMsIGRpc3RyaWJ1dGVkIHN5c3RlbXMsIGFuZCBzZXJ2ZXJsZXNzIGFwcGxpY2F0aW9u\
cy4gQW1hem9uIFNRUyBtb3ZlcyBkYXRhIGJldHdlZW4gZGlzdHJpYnV0ZWQgYXBwbGljYXRpb24g\
Y29tcG9uZW50cyBhbmQgaGVscHMgeW91IGRlY291cGxlIHRoZXNlIGNvbXBvbmVudHMuIgpwbGFu\
czoKICAtIG5hbWU6IHN0YW5kYXJkCiAgICBkZXNjcmlwdGlvbjogJ01hbmFnZWQgU1FTIFF1ZXVl\
IChTdGFuZGFyZCknCiAgICBmcmVlOiBmYWxzZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlO\
YW1lOiAiU3RhbmRhcmQiCiAgICAgIGxvbmdEZXNjcmlwdGlvbjogIlN0YW5kYXJkIFNRUyBBUEIi\
CiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOgogICAgICAtIG5hbWU6IHN0YWNrX2lk\
ZW50aWZpZXIKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBVbmlxdWUgU3Rh\
Y2sgSWRlbnRpZmllcgogICAgICAgIGRlc2NyaXB0aW9uOiAnVW5pcXVlIGlkZW50aWZpZXIgdG8g\
YmUgaW5jbHVkZWQgaW4gdGhlIENsb3VkRm9ybWF0aW9uIFN0YWNrIE5hbWUgdG8gcHJldmVudCBu\
YW1pbmcgY29sbGlzaW9ucy4gTXVzdCBvbmx5IGNvbnRhaW4gYWxwaGFudW1lcmljIGNoYXJhY3Rl\
cnMgYW5kIGh5cGhlbnMuIChlLmcuICJzYW1wbGUtc3FzLXN0YWNrIiwgInByb2R1Y3Rpb24tc3Fz\
LTA5LTIwMTciKScKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgLSBuYW1lOiBhd3NfYWNjZXNz\
X2tleQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IEFXUyBBY2Nlc3MgS2V5\
CiAgICAgICAgZGVzY3JpcHRpb246ICdBV1MgQWNjZXNzIEtleSB0byBhdXRoZW50aWNhdGUgdG8g\
QVdTIHdpdGguJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAtIG5hbWU6IGF3c19zZWNyZXRf\
a2V5CiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogQVdTIFNlY3JldCBLZXkK\
ICAgICAgICBkZXNjcmlwdGlvbjogJ0FXUyBTZWNyZXQgS2V5IHRvIGF1dGhlbnRpY2F0ZSB0byBB\
V1Mgd2l0aC4nCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgIC0gbmFtZTogcmVnaW9uCiAgICAg\
ICAgdGl0bGU6IEFXUyBSZWdpb24KICAgICAgICBkZXNjcmlwdGlvbjogJ0FXUyBSZWdpb24gdG8g\
Y3JlYXRlIFJEUyBpbnN0YW5jZSBpbi4nCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGVudW06\
CiAgICAgICAgICAtIGFwLW5vcnRoZWFzdC0xCiAgICAgICAgICAtIGFwLW5vcnRoZWFzdC0yCiAg\
ICAgICAgICAtIGFwLXNvdXRoLTEKICAgICAgICAgIC0gYXAtc291dGhlYXN0LTEKICAgICAgICAg\
IC0gYXAtc291dGhlYXN0LTIKICAgICAgICAgIC0gY2EtY2VudHJhbC0xCiAgICAgICAgICAtIGV1\
LWNlbnRyYWwtMQogICAgICAgICAgLSBldS13ZXN0LTEKICAgICAgICAgIC0gZXUtd2VzdC0yCiAg\
ICAgICAgICAtIHNhLWVhc3QtMQogICAgICAgICAgLSB1cy1lYXN0LTEKICAgICAgICAgIC0gdXMt\
ZWFzdC0yCiAgICAgICAgICAtIHVzLXdlc3QtMQogICAgICAgICAgLSB1cy13ZXN0LTIKICAgICAg\
ICBkZWZhdWx0OiB1cy13ZXN0LTIKICAgICAgLSBuYW1lOiBEZWxheVNlY29uZHMKICAgICAgICBy\
ZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBEZWxheSBTZWNvbmRzCiAgICAgICAgZGVzY3Jp\
cHRpb246ICdEZWxheSAoc2Vjb25kcyknCiAgICAgICAgdHlwZTogaW50CiAgICAgICAgZGVmYXVs\
dDogNQogICAgICAtIG5hbWU6IE1heGltdW1NZXNzYWdlU2l6ZQogICAgICAgIHRpdGxlOiBNYXhp\
bXVtIE1lc3NhZ2UgU2l6ZQogICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIGxpbWl0IG9mIGhvdyBt\
YW55IGJ5dGVzIHRoYXQgYSBtZXNzYWdlIGNhbiBjb250YWluIGJlZm9yZSBBbWF6b24gU1FTIHJl\
amVjdHMgaXQsIDEwMjQgYnl0ZXMgKDEgS2lCKSB0byAyNjIxNDQgYnl0ZXMgKDI1NiBLaUIpJwog\
ICAgICAgIHR5cGU6IGludAogICAgICAgIGRlZmF1bHQ6IDI2MjE0NAogICAgICAtIG5hbWU6IE1l\
c3NhZ2VSZXRlbnRpb25QZXJpb2QKICAgICAgICB0aXRsZTogTWVzc2FnZSBSZXRlbnRpb24gUGVy\
aW9kCiAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgbnVtYmVyIG9mIHNlY29uZHMgdGhhdCBBbWF6\
b24gU1FTIHJldGFpbnMgYSBtZXNzYWdlLiBZb3UgY2FuIHNwZWNpZnkgYW4gaW50ZWdlciB2YWx1\
ZSBmcm9tIDYwIHNlY29uZHMgKDEgbWludXRlKSB0byAxMjA5NjAwIHNlY29uZHMgKDE0IGRheXMp\
LicKICAgICAgICB0eXBlOiBpbnQKICAgICAgICBkZWZhdWx0OiAzNDU2MDAKICAgICAgLSBuYW1l\
OiBSZWNlaXZlTWVzc2FnZVdhaXRUaW1lU2Vjb25kcwogICAgICAgIHRpdGxlOiBSZWNlaXZlIE1l\
c3NhZ2UgV2FpdCBUaW1lIFNlY29uZHMKICAgICAgICBkZXNjcmlwdGlvbjogJ1NwZWNpZmllcyB0\
aGUgZHVyYXRpb24sIGluIHNlY29uZHMsIHRoYXQgdGhlIFJlY2VpdmVNZXNzYWdlIGFjdGlvbiBj\
YWxsIHdhaXRzIHVudGlsIGEgbWVzc2FnZSBpcyBpbiB0aGUgcXVldWUgaW4gb3JkZXIgdG8gaW5j\
bHVkZSBpdCBpbiB0aGUgcmVzcG9uc2UsIGFzIG9wcG9zZWQgdG8gcmV0dXJuaW5nIGFuIGVtcHR5\
IHJlc3BvbnNlIGlmIGEgbWVzc2FnZSBpcyBub3QgeWV0IGF2YWlsYWJsZS4gMSB0byAyMCcKICAg\
ICAgICBlbnVtOiBbIjEiLCAiMiIsICIzIiwgIjQiLCAiNSIsICI2IiwgIjciLCAiOCIsICI5Iiwg\
IjEwIiwgIjExIiwgIjEyIiwgIjEzIiwgIjE0IiwgIjE1IiwgIjE2IiwgIjE3IiwgIjE4IiwgIjE5\
IiwgIjIwIl0KICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZGVmYXVsdDogIjEiCiAgICAgIC0g\
bmFtZTogVXNlZGVhZGxldHRlclF1ZXVlCiAgICAgICAgdGl0bGU6IFVzZSBEZWFkIExldHRlciBR\
dWV1ZQogICAgICAgIGRlc2NyaXB0aW9uOiAnQSBkZWFkLWxldHRlciBxdWV1ZSBpcyBhIHF1ZXVl\
IHRoYXQgb3RoZXIgKHNvdXJjZSkgcXVldWVzIGNhbiB0YXJnZXQgZm9yIG1lc3NhZ2VzIHRoYXQg\
Y2FuIG5vdCBiZSBwcm9jZXNzZWQgKGNvbnN1bWVkKSBzdWNjZXNzZnVsbHkuIFlvdSBjYW4gc2V0\
IGFzaWRlIGFuZCBpc29sYXRlIHRoZXNlIG1lc3NhZ2VzIGluIHRoZSBkZWFkLWxldHRlciBxdWV1\
ZSB0byBkZXRlcm1pbmUgd2h5IHRoZWlyIHByb2Nlc3NpbmcgZG9lcyBub3Qgc3VjY2VlZC4nCiAg\
ICAgICAgZW51bTogWyJ0cnVlIiwgImZhbHNlIl0KICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAg\
ZGVmYXVsdDogImZhbHNlIgogICAgICAtIG5hbWU6IFZpc2liaWxpdHlUaW1lb3V0CiAgICAgICAg\
dGl0bGU6IFZpc2liaWxpdHkgVGltZW91dAogICAgICAgIGRlc2NyaXB0aW9uOiAnVGhpcyBzaG91\
bGQgYmUgbG9uZ2VyIHRoYW4gdGhlIHRpbWUgaXQgd291bGQgdGFrZSB0byBwcm9jZXNzIGFuZCBk\
ZWxldGUgYSBtZXNzYWdlLCB0aGlzIHNob3VsZCBub3QgZXhjZWVkIDEyIGhvdXJzLicKICAgICAg\
ICB0eXBlOiBpbnQKICAgICAgICBkZWZhdWx0OiA1CiAgLSBuYW1lOiBmaWZvCiAgICBkZXNjcmlw\
dGlvbjogTWFuYWdlZCBTUVMgUXVldWUgKEZJRk8pCiAgICBmcmVlOiBmYWxzZQogICAgbWV0YWRh\
dGE6CiAgICAgIGRpc3BsYXlOYW1lOiAiRklGTyIKICAgICAgbG9uZ0Rlc2NyaXB0aW9uOiAiRklG\
TyBTUVMgQVBCIgogICAgICBjb3N0OiAkMC4wMAogICAgcGFyYW1ldGVyczogCiAgICAgIC0gbmFt\
ZTogQ29udGVudEJhc2VkRGVkdXBsaWNhdGlvbgogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAg\
ICAgdGl0bGU6IENvbnRlbnQgQmFzZWQgRHVwbGljYXRpb24KICAgICAgICBkZXNjcmlwdGlvbjog\
J3NwZWNpZmllcyB3aGV0aGVyIHRvIGVuYWJsZSBjb250ZW50LWJhc2VkIGRlZHVwbGljYXRpb24n\
CiAgICAgICAgZW51bTogWyJ0cnVlIiwgImZhbHNlIl0KICAgICAgICB0eXBlOiBlbnVtCiAgICAg\
ICAgZGVmYXVsdDogInRydWUiCiAgICAgIC0gbmFtZTogUXVldWVOYW1lCiAgICAgICAgcmVxdWly\
ZWQ6IHRydWUKICAgICAgICB0aXRsZTogUXVldWUgTmFtZQogICAgICAgIGRlc2NyaXB0aW9uOiAn\
VGhlIG5hbWUgb2YgdGhlIFF1ZXVlIHRoaXMgc3RhY2sgd2lsbCBhcHBlbmQgLmZpZm8gdG8gdGhl\
IG5hbWUgcHJvdmlkZWQgaGVyZScKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgLSBuYW1lOiBz\
dGFja19pZGVudGlmaWVyCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogVW5p\
cXVlIFN0YWNrIElkZW50aWZpZXIKICAgICAgICBkZXNjcmlwdGlvbjogJ1VuaXF1ZSBpZGVudGlm\
aWVyIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBDbG91ZEZvcm1hdGlvbiBTdGFjayBOYW1lIHRvIHBy\
ZXZlbnQgbmFtaW5nIGNvbGxpc2lvbnMuIE11c3Qgb25seSBjb250YWluIGFscGhhbnVtZXJpYyBj\
aGFyYWN0ZXJzIGFuZCBoeXBoZW5zLiAoZS5nLiAic2FtcGxlLXNxcy1zdGFjayIsICJwcm9kdWN0\
aW9uLXNxcy0wOS0yMDE3IiknCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgIC0gbmFtZTogYXdz\
X2FjY2Vzc19rZXkKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBBV1MgQWNj\
ZXNzIEtleQogICAgICAgIGRlc2NyaXB0aW9uOiAnQVdTIEFjY2VzcyBLZXkgdG8gYXV0aGVudGlj\
YXRlIHRvIEFXUyB3aXRoLicKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgLSBuYW1lOiBhd3Nf\
c2VjcmV0X2tleQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IEFXUyBTZWNy\
ZXQgS2V5CiAgICAgICAgZGVzY3JpcHRpb246ICdBV1MgU2VjcmV0IEtleSB0byBhdXRoZW50aWNh\
dGUgdG8gQVdTIHdpdGguJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAtIG5hbWU6IHJlZ2lv\
bgogICAgICAgIHRpdGxlOiBBV1MgUmVnaW9uCiAgICAgICAgZGVzY3JpcHRpb246ICdBV1MgUmVn\
aW9uIHRvIGNyZWF0ZSBSRFMgaW5zdGFuY2UgaW4uJwogICAgICAgIHR5cGU6IGVudW0KICAgICAg\
ICBlbnVtOgogICAgICAgICAgLSBhcC1ub3J0aGVhc3QtMQogICAgICAgICAgLSBhcC1ub3J0aGVh\
c3QtMgogICAgICAgICAgLSBhcC1zb3V0aC0xCiAgICAgICAgICAtIGFwLXNvdXRoZWFzdC0xCiAg\
ICAgICAgICAtIGFwLXNvdXRoZWFzdC0yCiAgICAgICAgICAtIGNhLWNlbnRyYWwtMQogICAgICAg\
ICAgLSBldS1jZW50cmFsLTEKICAgICAgICAgIC0gZXUtd2VzdC0xCiAgICAgICAgICAtIGV1LXdl\
c3QtMgogICAgICAgICAgLSBzYS1lYXN0LTEKICAgICAgICAgIC0gdXMtZWFzdC0xCiAgICAgICAg\
ICAtIHVzLWVhc3QtMgogICAgICAgICAgLSB1cy13ZXN0LTEKICAgICAgICAgIC0gdXMtd2VzdC0y\
CiAgICAgICAgZGVmYXVsdDogdXMtd2VzdC0yCiAgICAgIC0gbmFtZTogRGVsYXlTZWNvbmRzCiAg\
ICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogRGVsYXkgU2Vjb25kcwogICAgICAg\
IGRlc2NyaXB0aW9uOiAnRGVsYXkgKHNlY29uZHMpJwogICAgICAgIHR5cGU6IGludAogICAgICAg\
IGRlZmF1bHQ6IDUKICAgICAgLSBuYW1lOiBNYXhpbXVtTWVzc2FnZVNpemUKICAgICAgICB0aXRs\
ZTogTWF4aW11bSBNZXNzYWdlIFNpemUKICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBsaW1pdCBv\
ZiBob3cgbWFueSBieXRlcyB0aGF0IGEgbWVzc2FnZSBjYW4gY29udGFpbiBiZWZvcmUgQW1hem9u\
IFNRUyByZWplY3RzIGl0LCAxMDI0IGJ5dGVzICgxIEtpQikgdG8gMjYyMTQ0IGJ5dGVzICgyNTYg\
S2lCKScKICAgICAgICB0eXBlOiBpbnQKICAgICAgICBkZWZhdWx0OiAyNjIxNDQKICAgICAgLSBu\
YW1lOiBNZXNzYWdlUmV0ZW50aW9uUGVyaW9kCiAgICAgICAgdGl0bGU6IE1lc3NhZ2UgUmV0ZW50\
aW9uIFBlcmlvZAogICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIG51bWJlciBvZiBzZWNvbmRzIHRo\
YXQgQW1hem9uIFNRUyByZXRhaW5zIGEgbWVzc2FnZS4gWW91IGNhbiBzcGVjaWZ5IGFuIGludGVn\
ZXIgdmFsdWUgZnJvbSA2MCBzZWNvbmRzICgxIG1pbnV0ZSkgdG8gMTIwOTYwMCBzZWNvbmRzICgx\
NCBkYXlzKS4nCiAgICAgICAgdHlwZTogaW50CiAgICAgICAgZGVmYXVsdDogMzQ1NjAwCiAgICAg\
IC0gbmFtZTogUmVjZWl2ZU1lc3NhZ2VXYWl0VGltZVNlY29uZHMKICAgICAgICB0aXRsZTogUmVj\
ZWl2ZSBNZXNzYWdlIFdhaXQgVGltZSBTZWNvbmRzCiAgICAgICAgZGVzY3JpcHRpb246ICdTcGVj\
aWZpZXMgdGhlIGR1cmF0aW9uLCBpbiBzZWNvbmRzLCB0aGF0IHRoZSBSZWNlaXZlTWVzc2FnZSBh\
Y3Rpb24gY2FsbCB3YWl0cyB1bnRpbCBhIG1lc3NhZ2UgaXMgaW4gdGhlIHF1ZXVlIGluIG9yZGVy\
IHRvIGluY2x1ZGUgaXQgaW4gdGhlIHJlc3BvbnNlLCBhcyBvcHBvc2VkIHRvIHJldHVybmluZyBh\
biBlbXB0eSByZXNwb25zZSBpZiBhIG1lc3NhZ2UgaXMgbm90IHlldCBhdmFpbGFibGUuIDEgdG8g\
MjAnCiAgICAgICAgZW51bTogWyIxIiwgIjIiLCAiMyIsICI0IiwgIjUiLCAiNiIsICI3IiwgIjgi\
LCAiOSIsICIxMCIsICIxMSIsICIxMiIsICIxMyIsICIxNCIsICIxNSIsICIxNiIsICIxNyIsICIx\
OCIsICIxOSIsICIyMCJdCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGRlZmF1bHQ6ICIxIgog\
ICAgICAtIG5hbWU6IFVzZWRlYWRsZXR0ZXJRdWV1ZQogICAgICAgIHRpdGxlOiBVc2UgRGVhZCBM\
ZXR0ZXIgUXVldWUKICAgICAgICBkZXNjcmlwdGlvbjogJ0EgZGVhZC1sZXR0ZXIgcXVldWUgaXMg\
YSBxdWV1ZSB0aGF0IG90aGVyIChzb3VyY2UpIHF1ZXVlcyBjYW4gdGFyZ2V0IGZvciBtZXNzYWdl\
cyB0aGF0IGNhbiBub3QgYmUgcHJvY2Vzc2VkIChjb25zdW1lZCkgc3VjY2Vzc2Z1bGx5LiBZb3Ug\
Y2FuIHNldCBhc2lkZSBhbmQgaXNvbGF0ZSB0aGVzZSBtZXNzYWdlcyBpbiB0aGUgZGVhZC1sZXR0\
ZXIgcXVldWUgdG8gZGV0ZXJtaW5lIHdoeSB0aGVpciBwcm9jZXNzaW5nIGRvZXMgbm90IHN1Y2Nl\
ZWQuJwogICAgICAgIGVudW06IFsidHJ1ZSIsICJmYWxzZSJdCiAgICAgICAgdHlwZTogZW51bQog\
ICAgICAgIGRlZmF1bHQ6ICJmYWxzZSIKICAgICAgLSBuYW1lOiBWaXNpYmlsaXR5VGltZW91dAog\
ICAgICAgIHRpdGxlOiBWaXNpYmlsaXR5IFRpbWVvdXQKICAgICAgICBkZXNjcmlwdGlvbjogJ1Ro\
aXMgc2hvdWxkIGJlIGxvbmdlciB0aGFuIHRoZSB0aW1lIGl0IHdvdWxkIHRha2UgdG8gcHJvY2Vz\
cyBhbmQgZGVsZXRlIGEgbWVzc2FnZSwgdGhpcyBzaG91bGQgbm90IGV4Y2VlZCAxMiBob3Vycy4n\
CiAgICAgICAgdHlwZTogaW50CiAgICAgICAgZGVmYXVsdDogNQo="





USER apb
