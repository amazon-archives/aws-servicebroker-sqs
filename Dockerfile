FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

RUN yum -y install python-boto3 python-boto && yum clean all

COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogc3FzLWFwYgppbWFnZTogamF5dGVzdGNhdGFzYm9yZy9zcXMtYXBiCmRlc2NyaXB0aW9u\
OiBBbWF6b24gTWFuYWdlZCBTUVMgUXVldWUgQVBCIEltcGxlbWVudGF0aW9uCnRhZ3M6CiAgLSBh\
bWF6b24KICAtIHNxcwogIC0gc3RhbmRhcmQKICAtIGZpZm8KYmluZGFibGU6IHRydWUKYXN5bmM6\
IG9wdGlvbmFsCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiAiQW1hem9uIFNRUyBRdWV1ZSAoQVBC\
KSIKICBpbWFnZVVybDogImh0dHBzOi8vczMuYW1hem9uYXdzLmNvbS90aHAtYXdzLWljb25zLWRl\
di9NZXNzYWdpbmdfQW1hem9uU1FTX0xBUkdFLnBuZyIKICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0\
cHM6Ly9hd3MuYW1hem9uLmNvbS9kb2N1bWVudGF0aW9uL3Nxcy8iCiAgbG9uZ0Rlc2NyaXB0aW9u\
OiAiQW1hem9uIFNpbXBsZSBRdWV1ZSBTZXJ2aWNlIChBbWF6b24gU1FTKSBpcyBhIGZ1bGx5IG1h\
bmFnZWQgbWVzc2FnZSBxdWV1aW5nIHNlcnZpY2UgdGhhdCBtYWtlcyBpdCBlYXN5IHRvIGRlY291\
cGxlIGFuZCBzY2FsZSBtaWNyb3NlcnZpY2VzLCBkaXN0cmlidXRlZCBzeXN0ZW1zLCBhbmQgc2Vy\
dmVybGVzcyBhcHBsaWNhdGlvbnMuIEFtYXpvbiBTUVMgbW92ZXMgZGF0YSBiZXR3ZWVuIGRpc3Ry\
aWJ1dGVkIGFwcGxpY2F0aW9uIGNvbXBvbmVudHMgYW5kIGhlbHBzIHlvdSBkZWNvdXBsZSB0aGVz\
ZSBjb21wb25lbnRzLiIKcGxhbnM6CiAgLSBuYW1lOiBzdGFuZGFyZAogICAgZGVzY3JpcHRpb246\
ICdNYW5hZ2VkIFNRUyBRdWV1ZSAoU3RhbmRhcmQpJwogICAgZnJlZTogZmFsc2UKICAgIG1ldGFk\
YXRhOgogICAgICBkaXNwbGF5TmFtZTogIlN0YW5kYXJkIgogICAgICBsb25nRGVzY3JpcHRpb246\
ICJTdGFuZGFyZCBTUVMgQVBCIgogICAgICBjb3N0OiAkMC4wMAogICAgcGFyYW1ldGVyczoKICAg\
ICAgLSBuYW1lOiBzdGFja19pZGVudGlmaWVyCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAg\
ICB0aXRsZTogVW5pcXVlIFN0YWNrIElkZW50aWZpZXIKICAgICAgICBkZXNjcmlwdGlvbjogJ1Vu\
aXF1ZSBpZGVudGlmaWVyIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBDbG91ZEZvcm1hdGlvbiBTdGFj\
ayBOYW1lIHRvIHByZXZlbnQgbmFtaW5nIGNvbGxpc2lvbnMuIE11c3Qgb25seSBjb250YWluIGFs\
cGhhbnVtZXJpYyBjaGFyYWN0ZXJzIGFuZCBoeXBoZW5zLiAoZS5nLiAic2FtcGxlLXNxcy1zdGFj\
ayIsICJwcm9kdWN0aW9uLXNxcy0wOS0yMDE3IiknCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAg\
IC0gbmFtZTogYXdzX2FjY2Vzc19rZXkKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRp\
dGxlOiBBV1MgQWNjZXNzIEtleQogICAgICAgIGRlc2NyaXB0aW9uOiAnQVdTIEFjY2VzcyBLZXkg\
dG8gYXV0aGVudGljYXRlIHRvIEFXUyB3aXRoLicKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAg\
LSBuYW1lOiBhd3Nfc2VjcmV0X2tleQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0\
bGU6IEFXUyBTZWNyZXQgS2V5CiAgICAgICAgZGVzY3JpcHRpb246ICdBV1MgU2VjcmV0IEtleSB0\
byBhdXRoZW50aWNhdGUgdG8gQVdTIHdpdGguJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAt\
IG5hbWU6IHJlZ2lvbgogICAgICAgIHRpdGxlOiBBV1MgUmVnaW9uCiAgICAgICAgZGVzY3JpcHRp\
b246ICdBV1MgUmVnaW9uIHRvIGNyZWF0ZSBSRFMgaW5zdGFuY2UgaW4uJwogICAgICAgIHR5cGU6\
IHN0cmluZwogICAgICAgIGRlZmF1bHQ6ICJ1cy13ZXN0LTIiCiAgICAgIC0gbmFtZTogRGVsYXlT\
ZWNvbmRzCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogRGVsYXkgU2Vjb25k\
cwogICAgICAgIGRlc2NyaXB0aW9uOiAnRGVsYXkgKHNlY29uZHMpJwogICAgICAgIHR5cGU6IGlu\
dAogICAgICAgIGRlZmF1bHQ6IDUKICAgICAgLSBuYW1lOiBNYXhpbXVtTWVzc2FnZVNpemUKICAg\
ICAgICB0aXRsZTogTWF4aW11bSBNZXNzYWdlIFNpemUKICAgICAgICBkZXNjcmlwdGlvbjogJ1Ro\
ZSBsaW1pdCBvZiBob3cgbWFueSBieXRlcyB0aGF0IGEgbWVzc2FnZSBjYW4gY29udGFpbiBiZWZv\
cmUgQW1hem9uIFNRUyByZWplY3RzIGl0LCAxMDI0IGJ5dGVzICgxIEtpQikgdG8gMjYyMTQ0IGJ5\
dGVzICgyNTYgS2lCKScKICAgICAgICB0eXBlOiBpbnQKICAgICAgICBkZWZhdWx0OiAyNjIxNDQK\
ICAgICAgLSBuYW1lOiBNZXNzYWdlUmV0ZW50aW9uUGVyaW9kCiAgICAgICAgdGl0bGU6IE1lc3Nh\
Z2UgUmV0ZW50aW9uIFBlcmlvZAogICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIG51bWJlciBvZiBz\
ZWNvbmRzIHRoYXQgQW1hem9uIFNRUyByZXRhaW5zIGEgbWVzc2FnZS4gWW91IGNhbiBzcGVjaWZ5\
IGFuIGludGVnZXIgdmFsdWUgZnJvbSA2MCBzZWNvbmRzICgxIG1pbnV0ZSkgdG8gMTIwOTYwMCBz\
ZWNvbmRzICgxNCBkYXlzKS4nCiAgICAgICAgdHlwZTogaW50CiAgICAgICAgZGVmYXVsdDogMzQ1\
NjAwCiAgICAgIC0gbmFtZTogUmVjZWl2ZU1lc3NhZ2VXYWl0VGltZVNlY29uZHMKICAgICAgICB0\
aXRsZTogUmVjZWl2ZSBNZXNzYWdlIFdhaXQgVGltZSBTZWNvbmRzCiAgICAgICAgZGVzY3JpcHRp\
b246ICdTcGVjaWZpZXMgdGhlIGR1cmF0aW9uLCBpbiBzZWNvbmRzLCB0aGF0IHRoZSBSZWNlaXZl\
TWVzc2FnZSBhY3Rpb24gY2FsbCB3YWl0cyB1bnRpbCBhIG1lc3NhZ2UgaXMgaW4gdGhlIHF1ZXVl\
IGluIG9yZGVyIHRvIGluY2x1ZGUgaXQgaW4gdGhlIHJlc3BvbnNlLCBhcyBvcHBvc2VkIHRvIHJl\
dHVybmluZyBhbiBlbXB0eSByZXNwb25zZSBpZiBhIG1lc3NhZ2UgaXMgbm90IHlldCBhdmFpbGFi\
bGUuIDEgdG8gMjAnCiAgICAgICAgZW51bTogWyIxIiwgIjIiLCAiMyIsICI0IiwgIjUiLCAiNiIs\
ICI3IiwgIjgiLCAiOSIsICIxMCIsICIxMSIsICIxMiIsICIxMyIsICIxNCIsICIxNSIsICIxNiIs\
ICIxNyIsICIxOCIsICIxOSIsICIyMCJdCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGRlZmF1\
bHQ6ICIxIgogICAgICAtIG5hbWU6IFVzZWRlYWRsZXR0ZXJRdWV1ZQogICAgICAgIHRpdGxlOiBV\
c2UgRGVhZCBMZXR0ZXIgUXVldWUKICAgICAgICBkZXNjcmlwdGlvbjogJ0EgZGVhZC1sZXR0ZXIg\
cXVldWUgaXMgYSBxdWV1ZSB0aGF0IG90aGVyIChzb3VyY2UpIHF1ZXVlcyBjYW4gdGFyZ2V0IGZv\
ciBtZXNzYWdlcyB0aGF0IGNhbiBub3QgYmUgcHJvY2Vzc2VkIChjb25zdW1lZCkgc3VjY2Vzc2Z1\
bGx5LiBZb3UgY2FuIHNldCBhc2lkZSBhbmQgaXNvbGF0ZSB0aGVzZSBtZXNzYWdlcyBpbiB0aGUg\
ZGVhZC1sZXR0ZXIgcXVldWUgdG8gZGV0ZXJtaW5lIHdoeSB0aGVpciBwcm9jZXNzaW5nIGRvZXMg\
bm90IHN1Y2NlZWQuJwogICAgICAgIGVudW06IFsidHJ1ZSIsICJmYWxzZSJdCiAgICAgICAgdHlw\
ZTogZW51bQogICAgICAgIGRlZmF1bHQ6ICJmYWxzZSIKICAgICAgLSBuYW1lOiBWaXNpYmlsaXR5\
VGltZW91dAogICAgICAgIHRpdGxlOiBWaXNpYmlsaXR5IFRpbWVvdXQKICAgICAgICBkZXNjcmlw\
dGlvbjogJ1RoaXMgc2hvdWxkIGJlIGxvbmdlciB0aGFuIHRoZSB0aW1lIGl0IHdvdWxkIHRha2Ug\
dG8gcHJvY2VzcyBhbmQgZGVsZXRlIGEgbWVzc2FnZSwgdGhpcyBzaG91bGQgbm90IGV4Y2VlZCAx\
MiBob3Vycy4nCiAgICAgICAgdHlwZTogaW50CiAgICAgICAgZGVmYXVsdDogNQogIC0gbmFtZTog\
ZmlmbwogICAgZGVzY3JpcHRpb246IE1hbmFnZWQgU1FTIFF1ZXVlIChGSUZPKQogICAgZnJlZTog\
ZmFsc2UKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogIkZJRk8iCiAgICAgIGxvbmdE\
ZXNjcmlwdGlvbjogIkZJRk8gU1FTIEFQQiIKICAgICAgY29zdDogJDAuMDAKICAgIHBhcmFtZXRl\
cnM6IAogICAgICAtIG5hbWU6IENvbnRlbnRCYXNlZERlZHVwbGljYXRpb24KICAgICAgICByZXF1\
aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBDb250ZW50IEJhc2VkIER1cGxpY2F0aW9uCiAgICAg\
ICAgZGVzY3JpcHRpb246ICdzcGVjaWZpZXMgd2hldGhlciB0byBlbmFibGUgY29udGVudC1iYXNl\
ZCBkZWR1cGxpY2F0aW9uJwogICAgICAgIGVudW06IFsidHJ1ZSIsICJmYWxzZSJdCiAgICAgICAg\
dHlwZTogZW51bQogICAgICAgIGRlZmF1bHQ6ICJ0cnVlIgogICAgICAtIG5hbWU6IFF1ZXVlTmFt\
ZQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IFF1ZXVlIE5hbWUKICAgICAg\
ICBkZXNjcmlwdGlvbjogJ1RoZSBuYW1lIG9mIHRoZSBRdWV1ZSB0aGlzIHN0YWNrIHdpbGwgYXBw\
ZW5kIC5maWZvIHRvIHRoZSBuYW1lIHByb3ZpZGVkIGhlcmUnCiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgIC0gbmFtZTogc3RhY2tfaWRlbnRpZmllcgogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAg\
ICAgICAgdGl0bGU6IFVuaXF1ZSBTdGFjayBJZGVudGlmaWVyCiAgICAgICAgZGVzY3JpcHRpb246\
ICdVbmlxdWUgaWRlbnRpZmllciB0byBiZSBpbmNsdWRlZCBpbiB0aGUgQ2xvdWRGb3JtYXRpb24g\
U3RhY2sgTmFtZSB0byBwcmV2ZW50IG5hbWluZyBjb2xsaXNpb25zLiBNdXN0IG9ubHkgY29udGFp\
biBhbHBoYW51bWVyaWMgY2hhcmFjdGVycyBhbmQgaHlwaGVucy4gKGUuZy4gInNhbXBsZS1zcXMt\
c3RhY2siLCAicHJvZHVjdGlvbi1zcXMtMDktMjAxNyIpJwogICAgICAgIHR5cGU6IHN0cmluZwog\
ICAgICAtIG5hbWU6IGF3c19hY2Nlc3Nfa2V5CiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAg\
ICB0aXRsZTogQVdTIEFjY2VzcyBLZXkKICAgICAgICBkZXNjcmlwdGlvbjogJ0FXUyBBY2Nlc3Mg\
S2V5IHRvIGF1dGhlbnRpY2F0ZSB0byBBV1Mgd2l0aC4nCiAgICAgICAgdHlwZTogc3RyaW5nCiAg\
ICAgIC0gbmFtZTogYXdzX3NlY3JldF9rZXkKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAg\
IHRpdGxlOiBBV1MgU2VjcmV0IEtleQogICAgICAgIGRlc2NyaXB0aW9uOiAnQVdTIFNlY3JldCBL\
ZXkgdG8gYXV0aGVudGljYXRlIHRvIEFXUyB3aXRoLicKICAgICAgICB0eXBlOiBzdHJpbmcKICAg\
ICAgLSBuYW1lOiByZWdpb24KICAgICAgICB0aXRsZTogQVdTIFJlZ2lvbgogICAgICAgIGRlc2Ny\
aXB0aW9uOiAnQVdTIFJlZ2lvbiB0byBjcmVhdGUgUkRTIGluc3RhbmNlIGluLicKICAgICAgICB0\
eXBlOiBzdHJpbmcKICAgICAgICBkZWZhdWx0OiAidXMtd2VzdC0yIgogICAgICAtIG5hbWU6IERl\
bGF5U2Vjb25kcwogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IERlbGF5IFNl\
Y29uZHMKICAgICAgICBkZXNjcmlwdGlvbjogJ0RlbGF5IChzZWNvbmRzKScKICAgICAgICB0eXBl\
OiBpbnQKICAgICAgICBkZWZhdWx0OiA1CiAgICAgIC0gbmFtZTogTWF4aW11bU1lc3NhZ2VTaXpl\
CiAgICAgICAgdGl0bGU6IE1heGltdW0gTWVzc2FnZSBTaXplCiAgICAgICAgZGVzY3JpcHRpb246\
ICdUaGUgbGltaXQgb2YgaG93IG1hbnkgYnl0ZXMgdGhhdCBhIG1lc3NhZ2UgY2FuIGNvbnRhaW4g\
YmVmb3JlIEFtYXpvbiBTUVMgcmVqZWN0cyBpdCwgMTAyNCBieXRlcyAoMSBLaUIpIHRvIDI2MjE0\
NCBieXRlcyAoMjU2IEtpQiknCiAgICAgICAgdHlwZTogaW50CiAgICAgICAgZGVmYXVsdDogMjYy\
MTQ0CiAgICAgIC0gbmFtZTogTWVzc2FnZVJldGVudGlvblBlcmlvZAogICAgICAgIHRpdGxlOiBN\
ZXNzYWdlIFJldGVudGlvbiBQZXJpb2QKICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBudW1iZXIg\
b2Ygc2Vjb25kcyB0aGF0IEFtYXpvbiBTUVMgcmV0YWlucyBhIG1lc3NhZ2UuIFlvdSBjYW4gc3Bl\
Y2lmeSBhbiBpbnRlZ2VyIHZhbHVlIGZyb20gNjAgc2Vjb25kcyAoMSBtaW51dGUpIHRvIDEyMDk2\
MDAgc2Vjb25kcyAoMTQgZGF5cykuJwogICAgICAgIHR5cGU6IGludAogICAgICAgIGRlZmF1bHQ6\
IDM0NTYwMAogICAgICAtIG5hbWU6IFJlY2VpdmVNZXNzYWdlV2FpdFRpbWVTZWNvbmRzCiAgICAg\
ICAgdGl0bGU6IFJlY2VpdmUgTWVzc2FnZSBXYWl0IFRpbWUgU2Vjb25kcwogICAgICAgIGRlc2Ny\
aXB0aW9uOiAnU3BlY2lmaWVzIHRoZSBkdXJhdGlvbiwgaW4gc2Vjb25kcywgdGhhdCB0aGUgUmVj\
ZWl2ZU1lc3NhZ2UgYWN0aW9uIGNhbGwgd2FpdHMgdW50aWwgYSBtZXNzYWdlIGlzIGluIHRoZSBx\
dWV1ZSBpbiBvcmRlciB0byBpbmNsdWRlIGl0IGluIHRoZSByZXNwb25zZSwgYXMgb3Bwb3NlZCB0\
byByZXR1cm5pbmcgYW4gZW1wdHkgcmVzcG9uc2UgaWYgYSBtZXNzYWdlIGlzIG5vdCB5ZXQgYXZh\
aWxhYmxlLiAxIHRvIDIwJwogICAgICAgIGVudW06IFsiMSIsICIyIiwgIjMiLCAiNCIsICI1Iiwg\
IjYiLCAiNyIsICI4IiwgIjkiLCAiMTAiLCAiMTEiLCAiMTIiLCAiMTMiLCAiMTQiLCAiMTUiLCAi\
MTYiLCAiMTciLCAiMTgiLCAiMTkiLCAiMjAiXQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBk\
ZWZhdWx0OiAiMSIKICAgICAgLSBuYW1lOiBVc2VkZWFkbGV0dGVyUXVldWUKICAgICAgICB0aXRs\
ZTogVXNlIERlYWQgTGV0dGVyIFF1ZXVlCiAgICAgICAgZGVzY3JpcHRpb246ICdBIGRlYWQtbGV0\
dGVyIHF1ZXVlIGlzIGEgcXVldWUgdGhhdCBvdGhlciAoc291cmNlKSBxdWV1ZXMgY2FuIHRhcmdl\
dCBmb3IgbWVzc2FnZXMgdGhhdCBjYW4gbm90IGJlIHByb2Nlc3NlZCAoY29uc3VtZWQpIHN1Y2Nl\
c3NmdWxseS4gWW91IGNhbiBzZXQgYXNpZGUgYW5kIGlzb2xhdGUgdGhlc2UgbWVzc2FnZXMgaW4g\
dGhlIGRlYWQtbGV0dGVyIHF1ZXVlIHRvIGRldGVybWluZSB3aHkgdGhlaXIgcHJvY2Vzc2luZyBk\
b2VzIG5vdCBzdWNjZWVkLicKICAgICAgICBlbnVtOiBbInRydWUiLCAiZmFsc2UiXQogICAgICAg\
IHR5cGU6IGVudW0KICAgICAgICBkZWZhdWx0OiAiZmFsc2UiCiAgICAgIC0gbmFtZTogVmlzaWJp\
bGl0eVRpbWVvdXQKICAgICAgICB0aXRsZTogVmlzaWJpbGl0eSBUaW1lb3V0CiAgICAgICAgZGVz\
Y3JpcHRpb246ICdUaGlzIHNob3VsZCBiZSBsb25nZXIgdGhhbiB0aGUgdGltZSBpdCB3b3VsZCB0\
YWtlIHRvIHByb2Nlc3MgYW5kIGRlbGV0ZSBhIG1lc3NhZ2UsIHRoaXMgc2hvdWxkIG5vdCBleGNl\
ZWQgMTIgaG91cnMuJwogICAgICAgIHR5cGU6IGludAogICAgICAgIGRlZmF1bHQ6IDUK"




USER apb
