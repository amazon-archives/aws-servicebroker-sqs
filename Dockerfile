FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

RUN yum -y install python-boto3 python-boto && yum clean all

COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions

LABEL "com.redhat.apb.version"="1.0.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogc3FzLWFwYgppbWFnZTogYW5zaWJsZXBsYXlib29rYnVuZGxlL3Nxcy1hcGIKZGVzY3Jp\
cHRpb246IEFtYXpvbiBNYW5hZ2VkIFNRUyBRdWV1ZSBBUEIgSW1wbGVtZW50YXRpb24KdGFnczoK\
ICAtIGFtYXpvbgogIC0gc3FzCiAgLSBzdGFuZGFyZAogIC0gZmlmbwpiaW5kYWJsZTogdHJ1ZQph\
c3luYzogb3B0aW9uYWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6ICJBbWF6b24gU1FTIFF1ZXVl\
IChBUEIpIgogIGltYWdlVXJsOiAiaHR0cHM6Ly9zMy5hbWF6b25hd3MuY29tL3RocC1hd3MtaWNv\
bnMtZGV2L01lc3NhZ2luZ19BbWF6b25TUVNfTEFSR0UucG5nIgogIGRvY3VtZW50YXRpb25Vcmw6\
ICJodHRwczovL2F3cy5hbWF6b24uY29tL2RvY3VtZW50YXRpb24vc3FzLyIKICBsb25nRGVzY3Jp\
cHRpb246ICJBbWF6b24gU2ltcGxlIFF1ZXVlIFNlcnZpY2UgKEFtYXpvbiBTUVMpIGlzIGEgZnVs\
bHkgbWFuYWdlZCBtZXNzYWdlIHF1ZXVpbmcgc2VydmljZSB0aGF0IG1ha2VzIGl0IGVhc3kgdG8g\
ZGVjb3VwbGUgYW5kIHNjYWxlIG1pY3Jvc2VydmljZXMsIGRpc3RyaWJ1dGVkIHN5c3RlbXMsIGFu\
ZCBzZXJ2ZXJsZXNzIGFwcGxpY2F0aW9ucy4gQW1hem9uIFNRUyBtb3ZlcyBkYXRhIGJldHdlZW4g\
ZGlzdHJpYnV0ZWQgYXBwbGljYXRpb24gY29tcG9uZW50cyBhbmQgaGVscHMgeW91IGRlY291cGxl\
IHRoZXNlIGNvbXBvbmVudHMuIgpwbGFuczoKICAtIG5hbWU6IHN0YW5kYXJkCiAgICBkZXNjcmlw\
dGlvbjogJ01hbmFnZWQgU1FTIFF1ZXVlIChTdGFuZGFyZCknCiAgICBmcmVlOiBmYWxzZQogICAg\
bWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiAiU3RhbmRhcmQiCiAgICAgIGxvbmdEZXNjcmlw\
dGlvbjogIlN0YW5kYXJkIFNRUyBBUEIiCiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJz\
OgogICAgICAtIG5hbWU6IHN0YWNrX2lkZW50aWZpZXIKICAgICAgICByZXF1aXJlZDogdHJ1ZQog\
ICAgICAgIHRpdGxlOiBVbmlxdWUgU3RhY2sgSWRlbnRpZmllcgogICAgICAgIGRlc2NyaXB0aW9u\
OiAnVW5pcXVlIGlkZW50aWZpZXIgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIENsb3VkRm9ybWF0aW9u\
IFN0YWNrIE5hbWUgdG8gcHJldmVudCBuYW1pbmcgY29sbGlzaW9ucy4gTXVzdCBvbmx5IGNvbnRh\
aW4gYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgYW5kIGh5cGhlbnMuIChlLmcuICJzYW1wbGUtc3Fz\
LXN0YWNrIiwgInByb2R1Y3Rpb24tc3FzLTA5LTIwMTciKScKICAgICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgLSBuYW1lOiBhd3NfYWNjZXNzX2tleQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAg\
ICAgdGl0bGU6IEFXUyBBY2Nlc3MgS2V5CiAgICAgICAgZGVzY3JpcHRpb246ICdBV1MgQWNjZXNz\
IEtleSB0byBhdXRoZW50aWNhdGUgdG8gQVdTIHdpdGguJwogICAgICAgIHR5cGU6IHN0cmluZwog\
ICAgICAtIG5hbWU6IGF3c19zZWNyZXRfa2V5CiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAg\
ICB0aXRsZTogQVdTIFNlY3JldCBLZXkKICAgICAgICBkZXNjcmlwdGlvbjogJ0FXUyBTZWNyZXQg\
S2V5IHRvIGF1dGhlbnRpY2F0ZSB0byBBV1Mgd2l0aC4nCiAgICAgICAgdHlwZTogc3RyaW5nCiAg\
ICAgIC0gbmFtZTogcmVnaW9uCiAgICAgICAgdGl0bGU6IEFXUyBSZWdpb24KICAgICAgICBkZXNj\
cmlwdGlvbjogJ0FXUyBSZWdpb24gdG8gY3JlYXRlIFJEUyBpbnN0YW5jZSBpbi4nCiAgICAgICAg\
dHlwZTogZW51bQogICAgICAgIGVudW06CiAgICAgICAgICAtIGFwLW5vcnRoZWFzdC0xCiAgICAg\
ICAgICAtIGFwLW5vcnRoZWFzdC0yCiAgICAgICAgICAtIGFwLXNvdXRoLTEKICAgICAgICAgIC0g\
YXAtc291dGhlYXN0LTEKICAgICAgICAgIC0gYXAtc291dGhlYXN0LTIKICAgICAgICAgIC0gY2Et\
Y2VudHJhbC0xCiAgICAgICAgICAtIGV1LWNlbnRyYWwtMQogICAgICAgICAgLSBldS13ZXN0LTEK\
ICAgICAgICAgIC0gZXUtd2VzdC0yCiAgICAgICAgICAtIHNhLWVhc3QtMQogICAgICAgICAgLSB1\
cy1lYXN0LTEKICAgICAgICAgIC0gdXMtZWFzdC0yCiAgICAgICAgICAtIHVzLXdlc3QtMQogICAg\
ICAgICAgLSB1cy13ZXN0LTIKICAgICAgICBkZWZhdWx0OiB1cy13ZXN0LTIKICAgICAgLSBuYW1l\
OiBEZWxheVNlY29uZHMKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBEZWxh\
eSBTZWNvbmRzCiAgICAgICAgZGVzY3JpcHRpb246ICdEZWxheSAoc2Vjb25kcyknCiAgICAgICAg\
dHlwZTogaW50CiAgICAgICAgZGVmYXVsdDogNQogICAgICAtIG5hbWU6IE1heGltdW1NZXNzYWdl\
U2l6ZQogICAgICAgIHRpdGxlOiBNYXhpbXVtIE1lc3NhZ2UgU2l6ZQogICAgICAgIGRlc2NyaXB0\
aW9uOiAnVGhlIGxpbWl0IG9mIGhvdyBtYW55IGJ5dGVzIHRoYXQgYSBtZXNzYWdlIGNhbiBjb250\
YWluIGJlZm9yZSBBbWF6b24gU1FTIHJlamVjdHMgaXQsIDEwMjQgYnl0ZXMgKDEgS2lCKSB0byAy\
NjIxNDQgYnl0ZXMgKDI1NiBLaUIpJwogICAgICAgIHR5cGU6IGludAogICAgICAgIGRlZmF1bHQ6\
IDI2MjE0NAogICAgICAtIG5hbWU6IE1lc3NhZ2VSZXRlbnRpb25QZXJpb2QKICAgICAgICB0aXRs\
ZTogTWVzc2FnZSBSZXRlbnRpb24gUGVyaW9kCiAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgbnVt\
YmVyIG9mIHNlY29uZHMgdGhhdCBBbWF6b24gU1FTIHJldGFpbnMgYSBtZXNzYWdlLiBZb3UgY2Fu\
IHNwZWNpZnkgYW4gaW50ZWdlciB2YWx1ZSBmcm9tIDYwIHNlY29uZHMgKDEgbWludXRlKSB0byAx\
MjA5NjAwIHNlY29uZHMgKDE0IGRheXMpLicKICAgICAgICB0eXBlOiBpbnQKICAgICAgICBkZWZh\
dWx0OiAzNDU2MDAKICAgICAgLSBuYW1lOiBSZWNlaXZlTWVzc2FnZVdhaXRUaW1lU2Vjb25kcwog\
ICAgICAgIHRpdGxlOiBSZWNlaXZlIE1lc3NhZ2UgV2FpdCBUaW1lIFNlY29uZHMKICAgICAgICBk\
ZXNjcmlwdGlvbjogJ1NwZWNpZmllcyB0aGUgZHVyYXRpb24sIGluIHNlY29uZHMsIHRoYXQgdGhl\
IFJlY2VpdmVNZXNzYWdlIGFjdGlvbiBjYWxsIHdhaXRzIHVudGlsIGEgbWVzc2FnZSBpcyBpbiB0\
aGUgcXVldWUgaW4gb3JkZXIgdG8gaW5jbHVkZSBpdCBpbiB0aGUgcmVzcG9uc2UsIGFzIG9wcG9z\
ZWQgdG8gcmV0dXJuaW5nIGFuIGVtcHR5IHJlc3BvbnNlIGlmIGEgbWVzc2FnZSBpcyBub3QgeWV0\
IGF2YWlsYWJsZS4gMSB0byAyMCcKICAgICAgICBlbnVtOiBbIjEiLCAiMiIsICIzIiwgIjQiLCAi\
NSIsICI2IiwgIjciLCAiOCIsICI5IiwgIjEwIiwgIjExIiwgIjEyIiwgIjEzIiwgIjE0IiwgIjE1\
IiwgIjE2IiwgIjE3IiwgIjE4IiwgIjE5IiwgIjIwIl0KICAgICAgICB0eXBlOiBlbnVtCiAgICAg\
ICAgZGVmYXVsdDogIjEiCiAgICAgIC0gbmFtZTogVXNlZGVhZGxldHRlclF1ZXVlCiAgICAgICAg\
dGl0bGU6IFVzZSBEZWFkIExldHRlciBRdWV1ZQogICAgICAgIGRlc2NyaXB0aW9uOiAnQSBkZWFk\
LWxldHRlciBxdWV1ZSBpcyBhIHF1ZXVlIHRoYXQgb3RoZXIgKHNvdXJjZSkgcXVldWVzIGNhbiB0\
YXJnZXQgZm9yIG1lc3NhZ2VzIHRoYXQgY2FuIG5vdCBiZSBwcm9jZXNzZWQgKGNvbnN1bWVkKSBz\
dWNjZXNzZnVsbHkuIFlvdSBjYW4gc2V0IGFzaWRlIGFuZCBpc29sYXRlIHRoZXNlIG1lc3NhZ2Vz\
IGluIHRoZSBkZWFkLWxldHRlciBxdWV1ZSB0byBkZXRlcm1pbmUgd2h5IHRoZWlyIHByb2Nlc3Np\
bmcgZG9lcyBub3Qgc3VjY2VlZC4nCiAgICAgICAgZW51bTogWyJ0cnVlIiwgImZhbHNlIl0KICAg\
ICAgICB0eXBlOiBlbnVtCiAgICAgICAgZGVmYXVsdDogImZhbHNlIgogICAgICAtIG5hbWU6IFZp\
c2liaWxpdHlUaW1lb3V0CiAgICAgICAgdGl0bGU6IFZpc2liaWxpdHkgVGltZW91dAogICAgICAg\
IGRlc2NyaXB0aW9uOiAnVGhpcyBzaG91bGQgYmUgbG9uZ2VyIHRoYW4gdGhlIHRpbWUgaXQgd291\
bGQgdGFrZSB0byBwcm9jZXNzIGFuZCBkZWxldGUgYSBtZXNzYWdlLCB0aGlzIHNob3VsZCBub3Qg\
ZXhjZWVkIDEyIGhvdXJzLicKICAgICAgICB0eXBlOiBpbnQKICAgICAgICBkZWZhdWx0OiA1CiAg\
LSBuYW1lOiBmaWZvCiAgICBkZXNjcmlwdGlvbjogTWFuYWdlZCBTUVMgUXVldWUgKEZJRk8pCiAg\
ICBmcmVlOiBmYWxzZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiAiRklGTyIKICAg\
ICAgbG9uZ0Rlc2NyaXB0aW9uOiAiRklGTyBTUVMgQVBCIgogICAgICBjb3N0OiAkMC4wMAogICAg\
cGFyYW1ldGVyczogCiAgICAgIC0gbmFtZTogQ29udGVudEJhc2VkRGVkdXBsaWNhdGlvbgogICAg\
ICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IENvbnRlbnQgQmFzZWQgRHVwbGljYXRp\
b24KICAgICAgICBkZXNjcmlwdGlvbjogJ3NwZWNpZmllcyB3aGV0aGVyIHRvIGVuYWJsZSBjb250\
ZW50LWJhc2VkIGRlZHVwbGljYXRpb24nCiAgICAgICAgZW51bTogWyJ0cnVlIiwgImZhbHNlIl0K\
ICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZGVmYXVsdDogInRydWUiCiAgICAgIC0gbmFtZTog\
UXVldWVOYW1lCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogUXVldWUgTmFt\
ZQogICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIG5hbWUgb2YgdGhlIFF1ZXVlIHRoaXMgc3RhY2sg\
d2lsbCBhcHBlbmQgLmZpZm8gdG8gdGhlIG5hbWUgcHJvdmlkZWQgaGVyZScKICAgICAgICB0eXBl\
OiBzdHJpbmcKICAgICAgLSBuYW1lOiBzdGFja19pZGVudGlmaWVyCiAgICAgICAgcmVxdWlyZWQ6\
IHRydWUKICAgICAgICB0aXRsZTogVW5pcXVlIFN0YWNrIElkZW50aWZpZXIKICAgICAgICBkZXNj\
cmlwdGlvbjogJ1VuaXF1ZSBpZGVudGlmaWVyIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBDbG91ZEZv\
cm1hdGlvbiBTdGFjayBOYW1lIHRvIHByZXZlbnQgbmFtaW5nIGNvbGxpc2lvbnMuIE11c3Qgb25s\
eSBjb250YWluIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIGFuZCBoeXBoZW5zLiAoZS5nLiAic2Ft\
cGxlLXNxcy1zdGFjayIsICJwcm9kdWN0aW9uLXNxcy0wOS0yMDE3IiknCiAgICAgICAgdHlwZTog\
c3RyaW5nCiAgICAgIC0gbmFtZTogYXdzX2FjY2Vzc19rZXkKICAgICAgICByZXF1aXJlZDogdHJ1\
ZQogICAgICAgIHRpdGxlOiBBV1MgQWNjZXNzIEtleQogICAgICAgIGRlc2NyaXB0aW9uOiAnQVdT\
IEFjY2VzcyBLZXkgdG8gYXV0aGVudGljYXRlIHRvIEFXUyB3aXRoLicKICAgICAgICB0eXBlOiBz\
dHJpbmcKICAgICAgLSBuYW1lOiBhd3Nfc2VjcmV0X2tleQogICAgICAgIHJlcXVpcmVkOiB0cnVl\
CiAgICAgICAgdGl0bGU6IEFXUyBTZWNyZXQgS2V5CiAgICAgICAgZGVzY3JpcHRpb246ICdBV1Mg\
U2VjcmV0IEtleSB0byBhdXRoZW50aWNhdGUgdG8gQVdTIHdpdGguJwogICAgICAgIHR5cGU6IHN0\
cmluZwogICAgICAtIG5hbWU6IHJlZ2lvbgogICAgICAgIHRpdGxlOiBBV1MgUmVnaW9uCiAgICAg\
ICAgZGVzY3JpcHRpb246ICdBV1MgUmVnaW9uIHRvIGNyZWF0ZSBSRFMgaW5zdGFuY2UgaW4uJwog\
ICAgICAgIHR5cGU6IGVudW0KICAgICAgICBlbnVtOgogICAgICAgICAgLSBhcC1ub3J0aGVhc3Qt\
MQogICAgICAgICAgLSBhcC1ub3J0aGVhc3QtMgogICAgICAgICAgLSBhcC1zb3V0aC0xCiAgICAg\
ICAgICAtIGFwLXNvdXRoZWFzdC0xCiAgICAgICAgICAtIGFwLXNvdXRoZWFzdC0yCiAgICAgICAg\
ICAtIGNhLWNlbnRyYWwtMQogICAgICAgICAgLSBldS1jZW50cmFsLTEKICAgICAgICAgIC0gZXUt\
d2VzdC0xCiAgICAgICAgICAtIGV1LXdlc3QtMgogICAgICAgICAgLSBzYS1lYXN0LTEKICAgICAg\
ICAgIC0gdXMtZWFzdC0xCiAgICAgICAgICAtIHVzLWVhc3QtMgogICAgICAgICAgLSB1cy13ZXN0\
LTEKICAgICAgICAgIC0gdXMtd2VzdC0yCiAgICAgICAgZGVmYXVsdDogdXMtd2VzdC0yCiAgICAg\
IC0gbmFtZTogRGVsYXlTZWNvbmRzCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRs\
ZTogRGVsYXkgU2Vjb25kcwogICAgICAgIGRlc2NyaXB0aW9uOiAnRGVsYXkgKHNlY29uZHMpJwog\
ICAgICAgIHR5cGU6IGludAogICAgICAgIGRlZmF1bHQ6IDUKICAgICAgLSBuYW1lOiBNYXhpbXVt\
TWVzc2FnZVNpemUKICAgICAgICB0aXRsZTogTWF4aW11bSBNZXNzYWdlIFNpemUKICAgICAgICBk\
ZXNjcmlwdGlvbjogJ1RoZSBsaW1pdCBvZiBob3cgbWFueSBieXRlcyB0aGF0IGEgbWVzc2FnZSBj\
YW4gY29udGFpbiBiZWZvcmUgQW1hem9uIFNRUyByZWplY3RzIGl0LCAxMDI0IGJ5dGVzICgxIEtp\
QikgdG8gMjYyMTQ0IGJ5dGVzICgyNTYgS2lCKScKICAgICAgICB0eXBlOiBpbnQKICAgICAgICBk\
ZWZhdWx0OiAyNjIxNDQKICAgICAgLSBuYW1lOiBNZXNzYWdlUmV0ZW50aW9uUGVyaW9kCiAgICAg\
ICAgdGl0bGU6IE1lc3NhZ2UgUmV0ZW50aW9uIFBlcmlvZAogICAgICAgIGRlc2NyaXB0aW9uOiAn\
VGhlIG51bWJlciBvZiBzZWNvbmRzIHRoYXQgQW1hem9uIFNRUyByZXRhaW5zIGEgbWVzc2FnZS4g\
WW91IGNhbiBzcGVjaWZ5IGFuIGludGVnZXIgdmFsdWUgZnJvbSA2MCBzZWNvbmRzICgxIG1pbnV0\
ZSkgdG8gMTIwOTYwMCBzZWNvbmRzICgxNCBkYXlzKS4nCiAgICAgICAgdHlwZTogaW50CiAgICAg\
ICAgZGVmYXVsdDogMzQ1NjAwCiAgICAgIC0gbmFtZTogUmVjZWl2ZU1lc3NhZ2VXYWl0VGltZVNl\
Y29uZHMKICAgICAgICB0aXRsZTogUmVjZWl2ZSBNZXNzYWdlIFdhaXQgVGltZSBTZWNvbmRzCiAg\
ICAgICAgZGVzY3JpcHRpb246ICdTcGVjaWZpZXMgdGhlIGR1cmF0aW9uLCBpbiBzZWNvbmRzLCB0\
aGF0IHRoZSBSZWNlaXZlTWVzc2FnZSBhY3Rpb24gY2FsbCB3YWl0cyB1bnRpbCBhIG1lc3NhZ2Ug\
aXMgaW4gdGhlIHF1ZXVlIGluIG9yZGVyIHRvIGluY2x1ZGUgaXQgaW4gdGhlIHJlc3BvbnNlLCBh\
cyBvcHBvc2VkIHRvIHJldHVybmluZyBhbiBlbXB0eSByZXNwb25zZSBpZiBhIG1lc3NhZ2UgaXMg\
bm90IHlldCBhdmFpbGFibGUuIDEgdG8gMjAnCiAgICAgICAgZW51bTogWyIxIiwgIjIiLCAiMyIs\
ICI0IiwgIjUiLCAiNiIsICI3IiwgIjgiLCAiOSIsICIxMCIsICIxMSIsICIxMiIsICIxMyIsICIx\
NCIsICIxNSIsICIxNiIsICIxNyIsICIxOCIsICIxOSIsICIyMCJdCiAgICAgICAgdHlwZTogZW51\
bQogICAgICAgIGRlZmF1bHQ6ICIxIgogICAgICAtIG5hbWU6IFVzZWRlYWRsZXR0ZXJRdWV1ZQog\
ICAgICAgIHRpdGxlOiBVc2UgRGVhZCBMZXR0ZXIgUXVldWUKICAgICAgICBkZXNjcmlwdGlvbjog\
J0EgZGVhZC1sZXR0ZXIgcXVldWUgaXMgYSBxdWV1ZSB0aGF0IG90aGVyIChzb3VyY2UpIHF1ZXVl\
cyBjYW4gdGFyZ2V0IGZvciBtZXNzYWdlcyB0aGF0IGNhbiBub3QgYmUgcHJvY2Vzc2VkIChjb25z\
dW1lZCkgc3VjY2Vzc2Z1bGx5LiBZb3UgY2FuIHNldCBhc2lkZSBhbmQgaXNvbGF0ZSB0aGVzZSBt\
ZXNzYWdlcyBpbiB0aGUgZGVhZC1sZXR0ZXIgcXVldWUgdG8gZGV0ZXJtaW5lIHdoeSB0aGVpciBw\
cm9jZXNzaW5nIGRvZXMgbm90IHN1Y2NlZWQuJwogICAgICAgIGVudW06IFsidHJ1ZSIsICJmYWxz\
ZSJdCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGRlZmF1bHQ6ICJmYWxzZSIKICAgICAgLSBu\
YW1lOiBWaXNpYmlsaXR5VGltZW91dAogICAgICAgIHRpdGxlOiBWaXNpYmlsaXR5IFRpbWVvdXQK\
ICAgICAgICBkZXNjcmlwdGlvbjogJ1RoaXMgc2hvdWxkIGJlIGxvbmdlciB0aGFuIHRoZSB0aW1l\
IGl0IHdvdWxkIHRha2UgdG8gcHJvY2VzcyBhbmQgZGVsZXRlIGEgbWVzc2FnZSwgdGhpcyBzaG91\
bGQgbm90IGV4Y2VlZCAxMiBob3Vycy4nCiAgICAgICAgdHlwZTogaW50CiAgICAgICAgZGVmYXVs\
dDogNQo="





USER apb
