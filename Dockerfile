FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

RUN yum -y install python-boto3 python-boto && yum clean all

COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogc3FzLWFwYgppbWFnZTogYW5zaWJsZXBsYXlib29rYnVuZGxlL3Nxcy1hcGIKZGVzY3Jp\
cHRpb246IEFtYXpvbiBNYW5hZ2VkIFNRUyBRdWV1ZSBBUEIgSW1wbGVtZW50YXRpb24KdGFnczoK\
ICAtIGFtYXpvbgogIC0gc3FzCiAgLSBzdGFuZGFyZAogIC0gZmlmbwpiaW5kYWJsZTogdHJ1ZQph\
c3luYzogb3B0aW9uYWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6ICJBbWF6b24gU1FTIFF1ZXVl\
IChBUEIpIgogIGltYWdlVXJsOiAiaHR0cHM6Ly9zMy5hbWF6b25hd3MuY29tL3RocC1hd3MtaWNv\
bnMtZGV2L01lc3NhZ2luZ19BbWF6b25TUVNfTEFSR0UucG5nIgogIGRvY3VtZW50YXRpb25Vcmw6\
ICJodHRwczovL2F3cy5hbWF6b24uY29tL2RvY3VtZW50YXRpb24vc3FzLyIKICBkZXBlbmRlbmNp\
ZXM6IFsnZG9ja2VyLmlvL2pheXRlc3RjYXRhc2Jvcmcvc3FzLWFwYjpsYXRlc3QnXQogIGxvbmdE\
ZXNjcmlwdGlvbjogIkFtYXpvbiBTaW1wbGUgUXVldWUgU2VydmljZSAoQW1hem9uIFNRUykgaXMg\
YSBmdWxseSBtYW5hZ2VkIG1lc3NhZ2UgcXVldWluZyBzZXJ2aWNlIHRoYXQgbWFrZXMgaXQgZWFz\
eSB0byBkZWNvdXBsZSBhbmQgc2NhbGUgbWljcm9zZXJ2aWNlcywgZGlzdHJpYnV0ZWQgc3lzdGVt\
cywgYW5kIHNlcnZlcmxlc3MgYXBwbGljYXRpb25zLiBBbWF6b24gU1FTIG1vdmVzIGRhdGEgYmV0\
d2VlbiBkaXN0cmlidXRlZCBhcHBsaWNhdGlvbiBjb21wb25lbnRzIGFuZCBoZWxwcyB5b3UgZGVj\
b3VwbGUgdGhlc2UgY29tcG9uZW50cy4iCnBsYW5zOgogIC0gbmFtZTogc3RhbmRhcmQKICAgIGRl\
c2NyaXB0aW9uOiAnTWFuYWdlZCBTUVMgUXVldWUgKFN0YW5kYXJkKScKICAgIGZyZWU6IGZhbHNl\
CiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6ICJTdGFuZGFyZCIKICAgICAgbG9uZ0Rl\
c2NyaXB0aW9uOiAiU3RhbmRhcmQgU1FTIEFQQiIKICAgICAgY29zdDogJDAuMDAKICAgIHBhcmFt\
ZXRlcnM6CiAgICAgIC0gbmFtZTogc3RhY2tfaWRlbnRpZmllcgogICAgICAgIHJlcXVpcmVkOiB0\
cnVlCiAgICAgICAgdGl0bGU6IFVuaXF1ZSBTdGFjayBJZGVudGlmaWVyCiAgICAgICAgZGVzY3Jp\
cHRpb246ICdVbmlxdWUgaWRlbnRpZmllciB0byBiZSBpbmNsdWRlZCBpbiB0aGUgQ2xvdWRGb3Jt\
YXRpb24gU3RhY2sgTmFtZSB0byBwcmV2ZW50IG5hbWluZyBjb2xsaXNpb25zLiBNdXN0IG9ubHkg\
Y29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVycyBhbmQgaHlwaGVucy4gKGUuZy4gInNhbXBs\
ZS1zcXMtc3RhY2siLCAicHJvZHVjdGlvbi1zcXMtMDktMjAxNyIpJwogICAgICAgIHR5cGU6IHN0\
cmluZwogICAgICAtIG5hbWU6IGF3c19hY2Nlc3Nfa2V5CiAgICAgICAgcmVxdWlyZWQ6IHRydWUK\
ICAgICAgICB0aXRsZTogQVdTIEFjY2VzcyBLZXkKICAgICAgICBkZXNjcmlwdGlvbjogJ0FXUyBB\
Y2Nlc3MgS2V5IHRvIGF1dGhlbnRpY2F0ZSB0byBBV1Mgd2l0aC4nCiAgICAgICAgdHlwZTogc3Ry\
aW5nCiAgICAgIC0gbmFtZTogYXdzX3NlY3JldF9rZXkKICAgICAgICByZXF1aXJlZDogdHJ1ZQog\
ICAgICAgIHRpdGxlOiBBV1MgU2VjcmV0IEtleQogICAgICAgIGRlc2NyaXB0aW9uOiAnQVdTIFNl\
Y3JldCBLZXkgdG8gYXV0aGVudGljYXRlIHRvIEFXUyB3aXRoLicKICAgICAgICB0eXBlOiBzdHJp\
bmcKICAgICAgLSBuYW1lOiByZWdpb24KICAgICAgICB0aXRsZTogQVdTIFJlZ2lvbgogICAgICAg\
IGRlc2NyaXB0aW9uOiAnQVdTIFJlZ2lvbiB0byBjcmVhdGUgUkRTIGluc3RhbmNlIGluLicKICAg\
ICAgICB0eXBlOiBlbnVtCiAgICAgICAgZW51bToKICAgICAgICAgIC0gYXAtbm9ydGhlYXN0LTEK\
ICAgICAgICAgIC0gYXAtbm9ydGhlYXN0LTIKICAgICAgICAgIC0gYXAtc291dGgtMQogICAgICAg\
ICAgLSBhcC1zb3V0aGVhc3QtMQogICAgICAgICAgLSBhcC1zb3V0aGVhc3QtMgogICAgICAgICAg\
LSBjYS1jZW50cmFsLTEKICAgICAgICAgIC0gZXUtY2VudHJhbC0xCiAgICAgICAgICAtIGV1LXdl\
c3QtMQogICAgICAgICAgLSBldS13ZXN0LTIKICAgICAgICAgIC0gc2EtZWFzdC0xCiAgICAgICAg\
ICAtIHVzLWVhc3QtMQogICAgICAgICAgLSB1cy1lYXN0LTIKICAgICAgICAgIC0gdXMtd2VzdC0x\
CiAgICAgICAgICAtIHVzLXdlc3QtMgogICAgICAgIGRlZmF1bHQ6IHVzLXdlc3QtMgogICAgICAt\
IG5hbWU6IERlbGF5U2Vjb25kcwogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6\
IERlbGF5IFNlY29uZHMKICAgICAgICBkZXNjcmlwdGlvbjogJ0RlbGF5IChzZWNvbmRzKScKICAg\
ICAgICB0eXBlOiBpbnQKICAgICAgICBkZWZhdWx0OiA1CiAgICAgIC0gbmFtZTogTWF4aW11bU1l\
c3NhZ2VTaXplCiAgICAgICAgdGl0bGU6IE1heGltdW0gTWVzc2FnZSBTaXplCiAgICAgICAgZGVz\
Y3JpcHRpb246ICdUaGUgbGltaXQgb2YgaG93IG1hbnkgYnl0ZXMgdGhhdCBhIG1lc3NhZ2UgY2Fu\
IGNvbnRhaW4gYmVmb3JlIEFtYXpvbiBTUVMgcmVqZWN0cyBpdCwgMTAyNCBieXRlcyAoMSBLaUIp\
IHRvIDI2MjE0NCBieXRlcyAoMjU2IEtpQiknCiAgICAgICAgdHlwZTogaW50CiAgICAgICAgZGVm\
YXVsdDogMjYyMTQ0CiAgICAgIC0gbmFtZTogTWVzc2FnZVJldGVudGlvblBlcmlvZAogICAgICAg\
IHRpdGxlOiBNZXNzYWdlIFJldGVudGlvbiBQZXJpb2QKICAgICAgICBkZXNjcmlwdGlvbjogJ1Ro\
ZSBudW1iZXIgb2Ygc2Vjb25kcyB0aGF0IEFtYXpvbiBTUVMgcmV0YWlucyBhIG1lc3NhZ2UuIFlv\
dSBjYW4gc3BlY2lmeSBhbiBpbnRlZ2VyIHZhbHVlIGZyb20gNjAgc2Vjb25kcyAoMSBtaW51dGUp\
IHRvIDEyMDk2MDAgc2Vjb25kcyAoMTQgZGF5cykuJwogICAgICAgIHR5cGU6IGludAogICAgICAg\
IGRlZmF1bHQ6IDM0NTYwMAogICAgICAtIG5hbWU6IFJlY2VpdmVNZXNzYWdlV2FpdFRpbWVTZWNv\
bmRzCiAgICAgICAgdGl0bGU6IFJlY2VpdmUgTWVzc2FnZSBXYWl0IFRpbWUgU2Vjb25kcwogICAg\
ICAgIGRlc2NyaXB0aW9uOiAnU3BlY2lmaWVzIHRoZSBkdXJhdGlvbiwgaW4gc2Vjb25kcywgdGhh\
dCB0aGUgUmVjZWl2ZU1lc3NhZ2UgYWN0aW9uIGNhbGwgd2FpdHMgdW50aWwgYSBtZXNzYWdlIGlz\
IGluIHRoZSBxdWV1ZSBpbiBvcmRlciB0byBpbmNsdWRlIGl0IGluIHRoZSByZXNwb25zZSwgYXMg\
b3Bwb3NlZCB0byByZXR1cm5pbmcgYW4gZW1wdHkgcmVzcG9uc2UgaWYgYSBtZXNzYWdlIGlzIG5v\
dCB5ZXQgYXZhaWxhYmxlLiAxIHRvIDIwJwogICAgICAgIGVudW06IFsiMSIsICIyIiwgIjMiLCAi\
NCIsICI1IiwgIjYiLCAiNyIsICI4IiwgIjkiLCAiMTAiLCAiMTEiLCAiMTIiLCAiMTMiLCAiMTQi\
LCAiMTUiLCAiMTYiLCAiMTciLCAiMTgiLCAiMTkiLCAiMjAiXQogICAgICAgIHR5cGU6IGVudW0K\
ICAgICAgICBkZWZhdWx0OiAiMSIKICAgICAgLSBuYW1lOiBVc2VkZWFkbGV0dGVyUXVldWUKICAg\
ICAgICB0aXRsZTogVXNlIERlYWQgTGV0dGVyIFF1ZXVlCiAgICAgICAgZGVzY3JpcHRpb246ICdB\
IGRlYWQtbGV0dGVyIHF1ZXVlIGlzIGEgcXVldWUgdGhhdCBvdGhlciAoc291cmNlKSBxdWV1ZXMg\
Y2FuIHRhcmdldCBmb3IgbWVzc2FnZXMgdGhhdCBjYW4gbm90IGJlIHByb2Nlc3NlZCAoY29uc3Vt\
ZWQpIHN1Y2Nlc3NmdWxseS4gWW91IGNhbiBzZXQgYXNpZGUgYW5kIGlzb2xhdGUgdGhlc2UgbWVz\
c2FnZXMgaW4gdGhlIGRlYWQtbGV0dGVyIHF1ZXVlIHRvIGRldGVybWluZSB3aHkgdGhlaXIgcHJv\
Y2Vzc2luZyBkb2VzIG5vdCBzdWNjZWVkLicKICAgICAgICBlbnVtOiBbInRydWUiLCAiZmFsc2Ui\
XQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBkZWZhdWx0OiAiZmFsc2UiCiAgICAgIC0gbmFt\
ZTogVmlzaWJpbGl0eVRpbWVvdXQKICAgICAgICB0aXRsZTogVmlzaWJpbGl0eSBUaW1lb3V0CiAg\
ICAgICAgZGVzY3JpcHRpb246ICdUaGlzIHNob3VsZCBiZSBsb25nZXIgdGhhbiB0aGUgdGltZSBp\
dCB3b3VsZCB0YWtlIHRvIHByb2Nlc3MgYW5kIGRlbGV0ZSBhIG1lc3NhZ2UsIHRoaXMgc2hvdWxk\
IG5vdCBleGNlZWQgMTIgaG91cnMuJwogICAgICAgIHR5cGU6IGludAogICAgICAgIGRlZmF1bHQ6\
IDUKICAtIG5hbWU6IGZpZm8KICAgIGRlc2NyaXB0aW9uOiBNYW5hZ2VkIFNRUyBRdWV1ZSAoRklG\
TykKICAgIGZyZWU6IGZhbHNlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6ICJGSUZP\
IgogICAgICBsb25nRGVzY3JpcHRpb246ICJGSUZPIFNRUyBBUEIiCiAgICAgIGNvc3Q6ICQwLjAw\
CiAgICBwYXJhbWV0ZXJzOiAKICAgICAgLSBuYW1lOiBDb250ZW50QmFzZWREZWR1cGxpY2F0aW9u\
CiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogQ29udGVudCBCYXNlZCBEdXBs\
aWNhdGlvbgogICAgICAgIGRlc2NyaXB0aW9uOiAnc3BlY2lmaWVzIHdoZXRoZXIgdG8gZW5hYmxl\
IGNvbnRlbnQtYmFzZWQgZGVkdXBsaWNhdGlvbicKICAgICAgICBlbnVtOiBbInRydWUiLCAiZmFs\
c2UiXQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBkZWZhdWx0OiAidHJ1ZSIKICAgICAgLSBu\
YW1lOiBRdWV1ZU5hbWUKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBRdWV1\
ZSBOYW1lCiAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgbmFtZSBvZiB0aGUgUXVldWUgdGhpcyBz\
dGFjayB3aWxsIGFwcGVuZCAuZmlmbyB0byB0aGUgbmFtZSBwcm92aWRlZCBoZXJlJwogICAgICAg\
IHR5cGU6IHN0cmluZwogICAgICAtIG5hbWU6IHN0YWNrX2lkZW50aWZpZXIKICAgICAgICByZXF1\
aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBVbmlxdWUgU3RhY2sgSWRlbnRpZmllcgogICAgICAg\
IGRlc2NyaXB0aW9uOiAnVW5pcXVlIGlkZW50aWZpZXIgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIENs\
b3VkRm9ybWF0aW9uIFN0YWNrIE5hbWUgdG8gcHJldmVudCBuYW1pbmcgY29sbGlzaW9ucy4gTXVz\
dCBvbmx5IGNvbnRhaW4gYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgYW5kIGh5cGhlbnMuIChlLmcu\
ICJzYW1wbGUtc3FzLXN0YWNrIiwgInByb2R1Y3Rpb24tc3FzLTA5LTIwMTciKScKICAgICAgICB0\
eXBlOiBzdHJpbmcKICAgICAgLSBuYW1lOiBhd3NfYWNjZXNzX2tleQogICAgICAgIHJlcXVpcmVk\
OiB0cnVlCiAgICAgICAgdGl0bGU6IEFXUyBBY2Nlc3MgS2V5CiAgICAgICAgZGVzY3JpcHRpb246\
ICdBV1MgQWNjZXNzIEtleSB0byBhdXRoZW50aWNhdGUgdG8gQVdTIHdpdGguJwogICAgICAgIHR5\
cGU6IHN0cmluZwogICAgICAtIG5hbWU6IGF3c19zZWNyZXRfa2V5CiAgICAgICAgcmVxdWlyZWQ6\
IHRydWUKICAgICAgICB0aXRsZTogQVdTIFNlY3JldCBLZXkKICAgICAgICBkZXNjcmlwdGlvbjog\
J0FXUyBTZWNyZXQgS2V5IHRvIGF1dGhlbnRpY2F0ZSB0byBBV1Mgd2l0aC4nCiAgICAgICAgdHlw\
ZTogc3RyaW5nCiAgICAgIC0gbmFtZTogcmVnaW9uCiAgICAgICAgdGl0bGU6IEFXUyBSZWdpb24K\
ICAgICAgICBkZXNjcmlwdGlvbjogJ0FXUyBSZWdpb24gdG8gY3JlYXRlIFJEUyBpbnN0YW5jZSBp\
bi4nCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGVudW06CiAgICAgICAgICAtIGFwLW5vcnRo\
ZWFzdC0xCiAgICAgICAgICAtIGFwLW5vcnRoZWFzdC0yCiAgICAgICAgICAtIGFwLXNvdXRoLTEK\
ICAgICAgICAgIC0gYXAtc291dGhlYXN0LTEKICAgICAgICAgIC0gYXAtc291dGhlYXN0LTIKICAg\
ICAgICAgIC0gY2EtY2VudHJhbC0xCiAgICAgICAgICAtIGV1LWNlbnRyYWwtMQogICAgICAgICAg\
LSBldS13ZXN0LTEKICAgICAgICAgIC0gZXUtd2VzdC0yCiAgICAgICAgICAtIHNhLWVhc3QtMQog\
ICAgICAgICAgLSB1cy1lYXN0LTEKICAgICAgICAgIC0gdXMtZWFzdC0yCiAgICAgICAgICAtIHVz\
LXdlc3QtMQogICAgICAgICAgLSB1cy13ZXN0LTIKICAgICAgICBkZWZhdWx0OiB1cy13ZXN0LTIK\
ICAgICAgLSBuYW1lOiBEZWxheVNlY29uZHMKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAg\
IHRpdGxlOiBEZWxheSBTZWNvbmRzCiAgICAgICAgZGVzY3JpcHRpb246ICdEZWxheSAoc2Vjb25k\
cyknCiAgICAgICAgdHlwZTogaW50CiAgICAgICAgZGVmYXVsdDogNQogICAgICAtIG5hbWU6IE1h\
eGltdW1NZXNzYWdlU2l6ZQogICAgICAgIHRpdGxlOiBNYXhpbXVtIE1lc3NhZ2UgU2l6ZQogICAg\
ICAgIGRlc2NyaXB0aW9uOiAnVGhlIGxpbWl0IG9mIGhvdyBtYW55IGJ5dGVzIHRoYXQgYSBtZXNz\
YWdlIGNhbiBjb250YWluIGJlZm9yZSBBbWF6b24gU1FTIHJlamVjdHMgaXQsIDEwMjQgYnl0ZXMg\
KDEgS2lCKSB0byAyNjIxNDQgYnl0ZXMgKDI1NiBLaUIpJwogICAgICAgIHR5cGU6IGludAogICAg\
ICAgIGRlZmF1bHQ6IDI2MjE0NAogICAgICAtIG5hbWU6IE1lc3NhZ2VSZXRlbnRpb25QZXJpb2QK\
ICAgICAgICB0aXRsZTogTWVzc2FnZSBSZXRlbnRpb24gUGVyaW9kCiAgICAgICAgZGVzY3JpcHRp\
b246ICdUaGUgbnVtYmVyIG9mIHNlY29uZHMgdGhhdCBBbWF6b24gU1FTIHJldGFpbnMgYSBtZXNz\
YWdlLiBZb3UgY2FuIHNwZWNpZnkgYW4gaW50ZWdlciB2YWx1ZSBmcm9tIDYwIHNlY29uZHMgKDEg\
bWludXRlKSB0byAxMjA5NjAwIHNlY29uZHMgKDE0IGRheXMpLicKICAgICAgICB0eXBlOiBpbnQK\
ICAgICAgICBkZWZhdWx0OiAzNDU2MDAKICAgICAgLSBuYW1lOiBSZWNlaXZlTWVzc2FnZVdhaXRU\
aW1lU2Vjb25kcwogICAgICAgIHRpdGxlOiBSZWNlaXZlIE1lc3NhZ2UgV2FpdCBUaW1lIFNlY29u\
ZHMKICAgICAgICBkZXNjcmlwdGlvbjogJ1NwZWNpZmllcyB0aGUgZHVyYXRpb24sIGluIHNlY29u\
ZHMsIHRoYXQgdGhlIFJlY2VpdmVNZXNzYWdlIGFjdGlvbiBjYWxsIHdhaXRzIHVudGlsIGEgbWVz\
c2FnZSBpcyBpbiB0aGUgcXVldWUgaW4gb3JkZXIgdG8gaW5jbHVkZSBpdCBpbiB0aGUgcmVzcG9u\
c2UsIGFzIG9wcG9zZWQgdG8gcmV0dXJuaW5nIGFuIGVtcHR5IHJlc3BvbnNlIGlmIGEgbWVzc2Fn\
ZSBpcyBub3QgeWV0IGF2YWlsYWJsZS4gMSB0byAyMCcKICAgICAgICBlbnVtOiBbIjEiLCAiMiIs\
ICIzIiwgIjQiLCAiNSIsICI2IiwgIjciLCAiOCIsICI5IiwgIjEwIiwgIjExIiwgIjEyIiwgIjEz\
IiwgIjE0IiwgIjE1IiwgIjE2IiwgIjE3IiwgIjE4IiwgIjE5IiwgIjIwIl0KICAgICAgICB0eXBl\
OiBlbnVtCiAgICAgICAgZGVmYXVsdDogIjEiCiAgICAgIC0gbmFtZTogVXNlZGVhZGxldHRlclF1\
ZXVlCiAgICAgICAgdGl0bGU6IFVzZSBEZWFkIExldHRlciBRdWV1ZQogICAgICAgIGRlc2NyaXB0\
aW9uOiAnQSBkZWFkLWxldHRlciBxdWV1ZSBpcyBhIHF1ZXVlIHRoYXQgb3RoZXIgKHNvdXJjZSkg\
cXVldWVzIGNhbiB0YXJnZXQgZm9yIG1lc3NhZ2VzIHRoYXQgY2FuIG5vdCBiZSBwcm9jZXNzZWQg\
KGNvbnN1bWVkKSBzdWNjZXNzZnVsbHkuIFlvdSBjYW4gc2V0IGFzaWRlIGFuZCBpc29sYXRlIHRo\
ZXNlIG1lc3NhZ2VzIGluIHRoZSBkZWFkLWxldHRlciBxdWV1ZSB0byBkZXRlcm1pbmUgd2h5IHRo\
ZWlyIHByb2Nlc3NpbmcgZG9lcyBub3Qgc3VjY2VlZC4nCiAgICAgICAgZW51bTogWyJ0cnVlIiwg\
ImZhbHNlIl0KICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZGVmYXVsdDogImZhbHNlIgogICAg\
ICAtIG5hbWU6IFZpc2liaWxpdHlUaW1lb3V0CiAgICAgICAgdGl0bGU6IFZpc2liaWxpdHkgVGlt\
ZW91dAogICAgICAgIGRlc2NyaXB0aW9uOiAnVGhpcyBzaG91bGQgYmUgbG9uZ2VyIHRoYW4gdGhl\
IHRpbWUgaXQgd291bGQgdGFrZSB0byBwcm9jZXNzIGFuZCBkZWxldGUgYSBtZXNzYWdlLCB0aGlz\
IHNob3VsZCBub3QgZXhjZWVkIDEyIGhvdXJzLicKICAgICAgICB0eXBlOiBpbnQKICAgICAgICBk\
ZWZhdWx0OiA1Cg=="





USER apb
